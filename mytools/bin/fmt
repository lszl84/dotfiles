#!/usr/bin/awk -f
BEGIN { w = 80 }
/^[[:space:]]*$/ {
    if (p) {
        print_para(p)
        p = ""
    }
    print
    next
}
{
    p = p (p ? " " : "") $0
}
END {
    if (p) {
        print_para(p)
    }
}

function print_para(t,    n, a, i, l) {
    n = split(t, a, " ")
    l = a[1]
    for (i = 2; i <= n; i++) {
        if (length(l) + length(a[i]) + 1 <= w) {
            l = l " " a[i]
        } else {
            print l
            l = a[i]
        }
    }
    if (l != "") print l
}
