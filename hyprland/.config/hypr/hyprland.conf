# hyprland.conf — Matching dwm + picom X11 experience

# ── Monitor ──────────────────────────────────────────────────────────
monitor = , preferred, auto, 2    # HiDPI 2x scaling

# ── Autostart ────────────────────────────────────────────────────────
exec-once = foot --server
exec-once = swaybg -m fill -i ~/.config/wallpaper.jpg
exec-once = waybar
exec-once = swayidle -w \
    timeout 900  'swaylock -f -c 000000' \
    timeout 1080 'hyprctl dispatch dpms off' \
    resume       'hyprctl dispatch dpms on' \
    before-sleep 'swaylock -f -c 000000'

# ── Appearance ───────────────────────────────────────────────────────
general {
    gaps_in = 7
    gaps_out = 7
    border_size = 0
    col.active_border = rgba(ffffffff)
    col.inactive_border = rgba(444444ff)
}

decoration {
    rounding = 22

    dim_inactive = true
    dim_strength = 0.35

    shadow {
        enabled = false
    }

    blur {
        enabled = true
        size = 5
        passes = 2
        new_optimizations = true
    }
}

animations {
    enabled = true
    bezier = snap, 0.2, 1.0, 0.2, 1.0
    animation = windows, 1, 3, snap
    animation = windowsOut, 1, 3, snap, popin 80%
    animation = fade, 1, 3, snap
    animation = workspaces, 1, 3, snap, slide
}

# ── Layout ───────────────────────────────────────────────────────────
master {
    mfact = 0.55
    new_status = slave
    orientation = left
}

dwindle {
    pseudotile = true
    preserve_split = true
}

# ── Input ────────────────────────────────────────────────────────────
input {
    follow_mouse = 1
    touchpad {
        natural_scroll = true
        clickfinger_behavior = true
        tap-to-click = false
    }
}

gestures {
    workspace_swipe = true
    workspace_swipe_fingers = 3
}

misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
}

# ── Keybindings ──────────────────────────────────────────────────────
$mod = SUPER

# Launch
bind = $mod, Return, exec, footclient
bind = $mod, space, exec, fuzzel
bind = $mod, BackSpace, killactive
bind = $mod SHIFT, BackSpace, exit

# Lock
bind = $mod, l, exec, swaylock -f -c 000000

# Bar toggle
bind = $mod, b, exec, pkill -SIGUSR1 waybar

# Focus
bind = $mod, j, cyclenext
bind = $mod, k, cyclenext, prev
bind = ALT, Tab, cyclenext
bind = ALT SHIFT, Tab, cyclenext, prev

# Master layout
bind = $mod SHIFT, Return, layoutmsg, swapwithmaster
bind = $mod, i, layoutmsg, addmaster
bind = $mod, d, layoutmsg, removemaster
bind = $mod, h, splitratio, -0.05
bind = $mod, comma, splitratio, -0.05
bind = $mod, period, splitratio, +0.05

# Layout modes
bind = $mod, t, exec, hyprctl keyword general:layout master
bind = $mod, f, togglefloating
bind = $mod, m, fullscreen, 1
bind = $mod SHIFT, space, togglefloating

# Last workspace
bind = $mod, Tab, workspace, previous

# Adjacent workspaces
bind = $mod, Left, workspace, e-1
bind = $mod, Right, workspace, e+1
bind = CTRL ALT, Left, workspace, e-1
bind = CTRL ALT, Right, workspace, e+1

# Workspaces 1-4
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4

# View all (special workspace toggle)
bind = $mod, 0, togglespecialworkspace, overview

# Media keys
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl  = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = , XF86MonBrightnessUp, exec, brightnessctl set +10%
bindel = , XF86MonBrightnessDown, exec, brightnessctl set 10%-

# Mouse bindings
bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

# ── Window Rules ─────────────────────────────────────────────────────
windowrulev2 = float, class:^(Gimp)$
windowrulev2 = float, class:^(VibeCut)$
windowrulev2 = bordersize 2, floating:1

# Terminal + Emacs opacity (blur shows through via foot alpha)
windowrulev2 = opacity 0.75, class:^(foot)$
windowrulev2 = opacity 0.75, class:^(footclient)$
windowrulev2 = opacity 0.75, class:^(Emacs)$
