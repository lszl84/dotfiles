#!/bin/bash
# dwm-touchpad â€” Apply libinput settings on start and after resume

apply() {
    for id in $(xinput list --id-only 2>/dev/null); do
        xinput set-prop "$id" "libinput Natural Scrolling Enabled" 1 2>/dev/null || true
        xinput set-prop "$id" "libinput Tapping Enabled" 0 2>/dev/null || true
        xinput set-prop "$id" "libinput Click Method Enabled" 0 1 2>/dev/null || true
    done
}

apply

dbus-monitor --system "type='signal',interface='org.freedesktop.login1.Manager',member=PrepareForSleep" |
while read -r line; do
    # PrepareForSleep(false) = system just resumed
    if [[ "$line" == *"boolean false"* ]]; then
        sleep 1
        apply
    fi
done
